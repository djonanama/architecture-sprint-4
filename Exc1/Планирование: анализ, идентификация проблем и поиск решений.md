# Планирование: анализ, идентификация проблем и поиск решений

## 1. Анализ системы и выявление проблем
### Основные проблемы:
1. **Долгая загрузка MES**
   - Страница с заказами загружается медленно, несмотря на фильтры и пагинацию.
   - Операторы не могут быстро брать заказы в работу, что замедляет производство.

2. **Рост задержек заказов и жалобы клиентов**
   - Увеличение числа заказов приводит к тому, что некоторые клиенты ждут несколько месяцев вместо обещанных 3 недель.
   - Клиенты B2C и B2B сообщают о просроченных заказах.

3. **Проблемы с API-заказами**
   - После открытия API нагрузка выросла, но система не справляется с обработкой заказов от партнёров.
   - Партнёры теряют заказы и отказываются от сотрудничества.

4. **Отсутствие масштабируемости и отказоустойчивости**
   - Каждое приложение работает на одном инстансе EC2, что создаёт точку отказа.
   - Базы данных работают с одним инстансом на чтение и запись, что может стать узким местом.

5. **Долгие релизы из-за ручного тестирования**
   - QA вручную проверяет систему, из-за чего задержки релизов достигли месяца.
   - Нет автоматизированного тестирования, что увеличивает риск ошибок.

6. **Слабая приоритизация заказов**
   - Нет чёткой стратегии приоритетности заказов между B2C и B2B.
   - Некоторые важные заказы теряются в очереди.

---

## 2. Разработка инициатив для устранения проблем
### Инициативы:
1. **Оптимизация загрузки MES**
   - Добавить индексы в БД, пересмотреть SQL-запросы.
   - Кэшировать список заказов, обновлять данные раз в N минут.

2. **Ускорение обработки заказов и уменьшение задержек**
   - Определить параметры доступности для всей системы (SLA) и внедрить мониторинг задержек.
   - Разделить потоки заказов B2C и B2B для лучшей балансировки нагрузки.

3. **Оптимизация API и RabbitMQ**
   - Создать отдельные очереди в RabbitMQ для разных типов заказов.
   - Улучшить логирование и мониторинг API.
   - Добавить ретраи и дедлайны на обработку заказов.

4. **Масштабирование инфраструктуры**
   - Развернуть дополнительные инстансы EC2 для масштабирования сервисов.
   - Добавить read-replica базы данных для балансировки нагрузки.
   - Рассмотреть переход на Kubernetes для лучшего управления нагрузкой.

5. **Автоматизация тестирования**
   - Внедрить автоматизированные API и UI-тесты.
   - Создать тестовый pipeline в CI/CD.
   - Перевести часть регрессионного тестирования на автотесты.

6. **Приоритизация заказов**
   - Ввести ранжирование заказов по срочности и стоимости.
   - Реализовать автоматическое перераспределение заказов при задержках.

---

## 3. Приоритетность инициатив
### Высший приоритет (решаем в ближайшие 6 месяцев):
1. **Оптимизация загрузки MES** – критично для скорости работы операторов.
2. **Оптимизация API и RabbitMQ** – уменьшит количество проблем с заказами.
3. **Автоматизация тестирования** – ускорит релизы, снизит количество багов.

### Средний приоритет (6-12 месяцев):
4. Масштабирование инфраструктуры – важно для стабильности системы.
5. Ускорение обработки заказов – улучшит репутацию компании.

### Низкий приоритет (после 12 месяцев):
6. Приоритизация заказов – поможет в будущем, но пока не блокирует работу.

---

## 4. Целевая архитектура через полгода
### Что должно измениться:
- **MES загружается быстро**, операторы могут моментально брать заказы.
- **API работает стабильно**, партнеры больше не теряют заказы.
- **Тестирование автоматизировано**, релизы выходят без долгих задержек.
- **RabbitMQ обрабатывает заказы эффективно**, очереди не перегружены.
- **Система масштабируется автоматически** при росте нагрузки.

### Если можно выполнить только 3 инициативы:
1. **Оптимизация MES** – ключевое узкое место, тормозящее производство.
2. **Оптимизация API и RabbitMQ** – критично для стабильной работы заказов.
3. **Автоматизация тестирования** – сократит задержки релизов.
